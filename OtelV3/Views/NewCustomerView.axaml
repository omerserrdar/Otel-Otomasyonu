<UserControl xmlns="https://github.com/avaloniaui"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
             xmlns:vm="using:OtelV3.ViewModels"
             xmlns:mi="using:Material.Icons.Avalonia"
             mc:Ignorable="d" d:DesignWidth="1200" d:DesignHeight="800"
             x:Class="OtelV3.Views.NewCustomerView"
             x:DataType="vm:NewCustomerViewModel"
             Background="{DynamicResource InputBackground}">

    <UserControl.Resources>
        <Color x:Key="PrimaryColor">#11b4d4</Color>
        <SolidColorBrush x:Key="PrimaryBrush" Color="{StaticResource PrimaryColor}"/>
        <SolidColorBrush x:Key="BackgroundLightBrush" Color="#f6f8f8"/>
        <SolidColorBrush x:Key="SurfaceLightBrush" Color="{DynamicResource SurfaceMain}"/>
        <SolidColorBrush x:Key="BorderLightBrush" Color="#dbe4e6"/>
        <SolidColorBrush x:Key="TextMainBrush" Color="#111718"/>
        <SolidColorBrush x:Key="TextSecondaryBrush" Color="#618389"/>
        <BoxShadows x:Key="SoftShadow">0 4 6 0 #0D11b4d4, 0 2 4 -1 #0811b4d4</BoxShadows>
    </UserControl.Resources>

    <UserControl.Styles>
        <!-- Global Input Styles -->
        <Style Selector="TextBox">
            <Setter Property="MinHeight" Value="48"/>
            <Setter Property="CornerRadius" Value="8"/>
            <Setter Property="VerticalContentAlignment" Value="Center"/>
            <Setter Property="Padding" Value="12,0"/>
            <Setter Property="FontSize" Value="14"/>
            <Setter Property="BorderThickness" Value="1"/>
            <Setter Property="BorderBrush" Value="{DynamicResource InputBorder}"/>
            <Setter Property="Background" Value="{DynamicResource InputBackground}"/>
            <Setter Property="Foreground" Value="{DynamicResource PrimaryText}"/>
        </Style>
        <Style Selector="TextBox:focus /template/ Border#PART_BorderElement">
            <Setter Property="BorderBrush" Value="{StaticResource PrimaryBrush}"/>
        </Style>

        <Style Selector="ComboBox">
            <Setter Property="MinHeight" Value="48"/>
            <Setter Property="CornerRadius" Value="8"/>
            <Setter Property="VerticalContentAlignment" Value="Center"/>
            <Setter Property="Padding" Value="12,0"/>
            <Setter Property="FontSize" Value="14"/>
            <Setter Property="HorizontalAlignment" Value="Stretch"/>
            <Setter Property="BorderThickness" Value="1"/>
            <Setter Property="BorderBrush" Value="{DynamicResource InputBorder}"/>
            <Setter Property="Background" Value="{DynamicResource InputBackground}"/>
            <Setter Property="Foreground" Value="{DynamicResource PrimaryText}"/>
        </Style>
    </UserControl.Styles>

    <Grid RowDefinitions="Auto, *, Auto"> 
        
        <!-- Header -->
        <Border Grid.Row="0" Background="{DynamicResource CardBackground}" BorderBrush="{DynamicResource BorderColorLight}" BorderThickness="0,0,0,1" Padding="0,24">
            <Grid MaxWidth="1800" HorizontalAlignment="Stretch" ColumnDefinitions="*, Auto" Margin="32,0">
                <StackPanel Grid.Column="0" Spacing="8" VerticalAlignment="Center">
                    <StackPanel Orientation="Horizontal" Spacing="6">
                        <TextBlock Text="Panel" Foreground="{DynamicResource SecondaryText}" FontSize="13" />
                         <mi:MaterialIcon Kind="ChevronRight" Foreground="{DynamicResource SecondaryText}" Width="16" Height="16" />
                        <TextBlock Text="Müşteriler" Foreground="{DynamicResource SecondaryText}" FontSize="13" />
                        <mi:MaterialIcon Kind="ChevronRight" Foreground="{DynamicResource SecondaryText}" Width="16" Height="16" />
                        <TextBlock Text="Yeni Ekle" Foreground="{StaticResource PrimaryBrush}" FontWeight="SemiBold" FontSize="13" />
                    </StackPanel>
                    
                     <StackPanel Spacing="4">
                        <TextBlock Text="Yeni Müşteri Ekle" FontSize="28" FontWeight="ExtraBold" Foreground="{DynamicResource PrimaryText}" LetterSpacing="-0.5"/>
                        <TextBlock Text="Sisteme yeni bir misafir kaydı oluşturun. Eksiksiz doldurulan formlar check-in sürecini hızlandırır." FontSize="16" Foreground="{DynamicResource SecondaryText}" />
                    </StackPanel>
                </StackPanel>
            </Grid>
        </Border>

        <!-- Form Content -->
        <!-- Wide structure based on previous feedback -->
        <ScrollViewer Grid.Row="1" Padding="32">
            <StackPanel Spacing="24" MaxWidth="1800" HorizontalAlignment="Stretch">
                
                <!-- Section 1: Personal Info -->
                <Border Background="{DynamicResource CardBackground}" CornerRadius="16" BorderBrush="{DynamicResource BorderColorLight}" BorderThickness="1" BoxShadow="0 1 2 0 #0D000000">
                    <StackPanel>
                        <!-- Header -->
                        <Border Padding="24,16" BorderBrush="{DynamicResource BorderColorLight}" BorderThickness="0,0,0,1" Background="{DynamicResource CardBackgroundAlt}" CornerRadius="16,16,0,0">
                            <StackPanel Orientation="Horizontal" Spacing="8">
                                <mi:MaterialIcon Kind="BadgeAccount" Foreground="{StaticResource PrimaryBrush}" Width="24" Height="24"/>
                                <TextBlock Text="Kişisel Bilgiler" FontSize="16" FontWeight="Bold" Foreground="{DynamicResource PrimaryText}" VerticalAlignment="Center"/>
                            </StackPanel>
                        </Border>
                        
                        <!-- Content -->
                        <Grid ColumnDefinitions="*,24,*,24,*" RowDefinitions="Auto, 24, Auto" Margin="24,32">
                            <!-- Row 1 -->
                            <StackPanel Grid.Row="0" Grid.Column="0" Spacing="8">
                                <TextBlock Text="Ad" FontSize="14" FontWeight="Medium" Foreground="{DynamicResource PrimaryText}"/>
                                <TextBox Text="{Binding FirstName}" Watermark="Örn. Ahmet"/>
                            </StackPanel>
                            
                            <StackPanel Grid.Row="0" Grid.Column="2" Spacing="8">
                                <TextBlock Text="Soyad" FontSize="14" FontWeight="Medium" Foreground="{DynamicResource PrimaryText}"/>
                                <TextBox Text="{Binding LastName}" Watermark="Örn. Yılmaz"/>
                            </StackPanel>
                            
                            <StackPanel Grid.Row="0" Grid.Column="4" Spacing="8">
                                <TextBlock Text="Cinsiyet" FontSize="14" FontWeight="Medium" Foreground="{DynamicResource PrimaryText}"/>
                                <ComboBox ItemsSource="{Binding GenderOptions}" SelectedItem="{Binding Gender}" PlaceholderText="Seçiniz"/>
                            </StackPanel>
                            
                            <!-- Row 2 -->
                             <StackPanel Grid.Row="2" Grid.Column="0" Spacing="8">
                                <TextBlock Text="Kimlik Tipi" FontSize="14" FontWeight="Medium" Foreground="{DynamicResource PrimaryText}"/>
                                <ComboBox ItemsSource="{Binding IdTypeOptions}" SelectedItem="{Binding IdType}"/>
                            </StackPanel>
                            
                            <StackPanel Grid.Row="2" Grid.Column="2" Spacing="8">
                                <TextBlock Text="Kimlik Numarası" FontSize="14" FontWeight="Medium" Foreground="{DynamicResource PrimaryText}"/>
                                <TextBox Text="{Binding IdNumber}" Watermark="Kimlik Numarası Giriniz"/>
                            </StackPanel>
                            
                            <StackPanel Grid.Row="2" Grid.Column="4" Spacing="8">
                                <TextBlock Text="Uyruk" FontSize="14" FontWeight="Medium" Foreground="{DynamicResource PrimaryText}"/>
                                <ComboBox ItemsSource="{Binding NationalityOptions}" SelectedItem="{Binding Nationality}"/>
                            </StackPanel>
                        </Grid>
                    </StackPanel>
                </Border>
                
                <!-- Section 2: Contact Info -->
                <Border Background="{DynamicResource CardBackground}" CornerRadius="16" BorderBrush="{DynamicResource BorderColorLight}" BorderThickness="1" BoxShadow="0 1 2 0 #0D000000">
                    <StackPanel>
                        <!-- Header -->
                        <Border Padding="24,16" BorderBrush="{DynamicResource BorderColorLight}" BorderThickness="0,0,0,1" Background="{DynamicResource CardBackgroundAlt}" CornerRadius="16,16,0,0">
                            <StackPanel Orientation="Horizontal" Spacing="8">
                                <mi:MaterialIcon Kind="ContactPhone" Foreground="{StaticResource PrimaryBrush}" Width="24" Height="24"/>
                                <TextBlock Text="İletişim Bilgileri" FontSize="16" FontWeight="Bold" Foreground="{DynamicResource PrimaryText}" VerticalAlignment="Center"/>
                            </StackPanel>
                        </Border>
                        
                        <!-- Content -->
                        <Grid ColumnDefinitions="*,24,*" Margin="24,32">
                             <StackPanel Grid.Column="0" Spacing="8">
                                <TextBlock Text="Telefon Numarası" FontSize="14" FontWeight="Medium" Foreground="{DynamicResource PrimaryText}"/>
                                <TextBox Text="{Binding Phone}" Watermark="05XX XXX XX XX">
                                    <TextBox.InnerLeftContent>
                                        <mi:MaterialIcon Kind="Phone" Width="20" Height="20" Foreground="{DynamicResource SecondaryText}" Margin="12,0,4,0"/>
                                    </TextBox.InnerLeftContent>
                                </TextBox>
                            </StackPanel>
                            
                            <StackPanel Grid.Column="2" Spacing="8">
                                <TextBlock Text="E-posta Adresi" FontSize="14" FontWeight="Medium" Foreground="{DynamicResource PrimaryText}"/>
                                <TextBox Text="{Binding Email}" Watermark="ornek@email.com">
                                     <TextBox.InnerLeftContent>
                                        <mi:MaterialIcon Kind="Email" Width="20" Height="20" Foreground="{DynamicResource SecondaryText}" Margin="12,0,4,0"/>
                                    </TextBox.InnerLeftContent>
                                </TextBox>
                            </StackPanel>
                        </Grid>
                    </StackPanel>
                </Border>
                
                <!-- Section 3: Address & Notes -->
                <Border Background="{DynamicResource CardBackground}" CornerRadius="16" BorderBrush="{DynamicResource BorderColorLight}" BorderThickness="1" BoxShadow="0 1 2 0 #0D000000">
                    <StackPanel>
                        <!-- Header -->
                        <Border Padding="24,16" BorderBrush="{DynamicResource BorderColorLight}" BorderThickness="0,0,0,1" Background="{DynamicResource CardBackgroundAlt}" CornerRadius="16,16,0,0">
                             <StackPanel Orientation="Horizontal" Spacing="8">
                                <mi:MaterialIcon Kind="MapMarker" Foreground="{StaticResource PrimaryBrush}" Width="24" Height="24"/>
                                <TextBlock Text="Adres &amp; Diğer" FontSize="16" FontWeight="Bold" Foreground="{DynamicResource PrimaryText}" VerticalAlignment="Center"/>
                            </StackPanel>
                        </Border>
                        
                        <!-- Content -->
                        <Grid ColumnDefinitions="2*, 24, *" RowDefinitions="Auto, 24, Auto" Margin="24,32">
                            <!-- Address -->
                             <StackPanel Grid.Row="0" Grid.Column="0" Spacing="8">
                                <TextBlock Text="Açık Adres" FontSize="14" FontWeight="Medium" Foreground="{DynamicResource PrimaryText}"/>
                                <TextBox Text="{Binding Address}" Watermark="Mahalle, cadde, sokak..." AcceptsReturn="True" TextWrapping="Wrap" Height="80" VerticalContentAlignment="Top" Padding="12,12"/>
                            </StackPanel>
                            
                            <!-- City & Zip -->
                            <StackPanel Grid.Row="0" Grid.Column="2" Spacing="12">
                                <StackPanel Spacing="8">
                                    <TextBlock Text="Şehir" FontSize="14" FontWeight="Medium" Foreground="{DynamicResource PrimaryText}"/>
                                    <TextBox Text="{Binding City}" Watermark="İstanbul"/>
                                </StackPanel>
                                <StackPanel Spacing="8">
                                    <TextBlock Text="Posta Kodu" FontSize="14" FontWeight="Medium" Foreground="{DynamicResource PrimaryText}"/>
                                    <TextBox Text="{Binding ZipCode}" Watermark="34000"/>
                                </StackPanel>
                            </StackPanel>
                            
                            <!-- Notes (Full Span) -->
                             <StackPanel Grid.Row="2" Grid.ColumnSpan="3" Spacing="8">
                                <TextBlock Text="Müşteri Notları (İsteğe bağlı)" FontSize="14" FontWeight="Medium" Foreground="{DynamicResource PrimaryText}"/>
                                <TextBox Text="{Binding Notes}" Watermark="Özel durumlar, notlar..." AcceptsReturn="True" TextWrapping="Wrap" Height="80" VerticalContentAlignment="Top" Padding="12,12"/>
                            </StackPanel>
                        </Grid>
                    </StackPanel>
                </Border>
                
                <!-- Spacer for ScrollViewer (ensures content is not hidden behind footer on small screens if overlaps occurred) -->
                 <Border Height="20" />
            </StackPanel>
        </ScrollViewer>
        
        <!-- Sticky Footer (Restored but Compact) -->
        <Border Grid.Row="2" Background="{DynamicResource CardBackground}" BorderBrush="{DynamicResource BorderColorLight}" BorderThickness="0,1,0,0" Padding="32,16" BoxShadow="0 -2 4 -2 #0D000000">
            <Grid MaxWidth="1800" HorizontalAlignment="Stretch">
                <StackPanel Orientation="Horizontal" HorizontalAlignment="Right" Spacing="16">
                    <Button Command="{Binding CancelCommand}" Content="İptal" Background="Transparent" Foreground="{DynamicResource SecondaryText}" FontWeight="SemiBold" FontSize="14" Padding="20,10" CornerRadius="8" Cursor="Hand" BorderThickness="1" BorderBrush="{DynamicResource BorderColorLight}"/>
                    
                    <Button Command="{Binding SaveCommand}" Background="{StaticResource PrimaryBrush}" CornerRadius="8" Padding="24,10" Cursor="Hand">
                         <Button.Styles>
                             <Style Selector="Button:pointerover /template/ ContentPresenter">
                                <Setter Property="Background" Value="#0e9ab5"/>
                             </Style>
                        </Button.Styles>
                        <StackPanel Orientation="Horizontal" Spacing="8">
                             <mi:MaterialIcon Kind="ContentSave" Width="18" Height="18" Foreground="White" />
                            <TextBlock Text="Kaydet" FontWeight="Bold" Foreground="White" FontSize="14" />
                        </StackPanel>
                    </Button>
                </StackPanel>
            </Grid>
        </Border>

    </Grid>
</UserControl>
